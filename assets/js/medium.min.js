!function () { "use strict"; function e(e) { var t = e.getBoundingClientRect(), n = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0, o = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0; return { top: t.top + n, left: t.left + o } } var t = 80, n = function () { function n() { var e = document.createElement("img"); e.onload = function () { s = Number(e.height), a = Number(e.width), o() }, e.src = c.currentSrc || c.src } function o() { (u = document.createElement("div")).className = "zoom-img-wrap", u.style.position = "absolute", u.style.top = e(c).top + "px", u.style.left = e(c).left + "px", (m = c.cloneNode()).style.visibility = "hidden", c.style.width = c.offsetWidth + "px", c.parentNode.replaceChild(m, c), document.body.appendChild(u), u.appendChild(c), c.classList.add("zoom-img"), c.setAttribute("data-action", "zoom-out"), (d = document.createElement("div")).className = "zoom-overlay", document.body.appendChild(d), function () { c.offsetWidth; var e = a, n = s, o = e / c.width, i = window.innerHeight - t, r = window.innerWidth - t, d = e / n, u = r / i; l = e < r && n < i ? o : d < u ? i / n * o : r / e * o }(), function () { c.offsetWidth; var t = e(c), n = window.pageYOffset + window.innerHeight / 2, o = window.innerWidth / 2, i = t.top + c.height / 2, r = t.left + c.width / 2, s = Math.round(n - i), a = Math.round(o - r), d = "scale(" + l + ")", m = "translate(" + a + "px, " + s + "px) translateZ(0)"; c.style.webkitTransform = d, c.style.msTransform = d, c.style.transform = d, u.style.webkitTransform = m, u.style.msTransform = m, u.style.transform = m, document.body.classList.add("zoom-overlay-open") }() } function i() { if (document.body.classList.remove("zoom-overlay-open"), document.body.classList.add("zoom-overlay-transitioning"), c.style.webkitTransform = "", c.style.msTransform = "", c.style.transform = "", u.style.webkitTransform = "", u.style.msTransform = "", u.style.transform = "", !1 in document.body.style) return r(); u.addEventListener("transitionend", r), u.addEventListener("webkitTransitionEnd", r) } function r() { c.removeEventListener("transitionend", r), c.removeEventListener("webkitTransitionEnd", r), u && u.parentNode && (c.classList.remove("zoom-img"), c.style.width = "", c.setAttribute("data-action", "zoom"), m.parentNode.replaceChild(c, m), u.parentNode.removeChild(u), d.parentNode.removeChild(d), document.body.classList.remove("zoom-overlay-transitioning")) } var s = null, a = null, d = null, l = null, c = null, u = null, m = null; return function (e) { return c = e, { zoomImage: n, close: i, dispose: r } } }(); (function () { function e(e) { e = e || { forceDispose: !1 }, a && (a[e.forceDispose ? "dispose" : "close"](), window.removeEventListener("scroll", t), document.removeEventListener("keyup", o), document.removeEventListener("click", i), document.removeEventListener("touchstart", r), document.removeEventListener("touchend", i), a = null) } function t(t) { null === d && (d = window.pageYOffset); var n = d - window.pageYOffset; Math.abs(n) >= 40 && e() } function o(t) { 27 == t.keyCode && e() } function i(t) { t.stopPropagation(), t.preventDefault(), e() } function r(e) { l = e.touches[0].pageY, e.target.addEventListener("touchmove", s) } function s(t) { Math.abs(t.touches[0].pageY - l) <= 10 || (e(), t.target.removeEventListener("touchmove", s)) } var a = null, d = null, l = null; return { listen: function () { document.body.addEventListener("click", function (s) { "zoom" === s.target.getAttribute("data-action") && "IMG" === s.target.tagName && function (s) { if (s.stopPropagation(), !document.body.classList.contains("zoom-overlay-open")) { if (s.metaKey || s.ctrlKey) return void window.open(event.target.getAttribute("data-original") || event.target.currentSrc || event.target.src, "_blank"); e({ forceDispose: !0 }), (a = n(s.target)).zoomImage(), window.addEventListener("scroll", t), document.addEventListener("click", i), document.addEventListener("keyup", o), document.addEventListener("touchstart", r), document.addEventListener("touchend", i) } }(s) }) } } })().listen() }();